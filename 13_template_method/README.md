# 1. 什么是 OTP

OTP：One Time Password，又称一次性口令、一次性密码、动态密码、单次有效密码。

OTP 基于专门的算法每隔一定的时间间隔生成一个不可预测的随机数字组合。

OTP 的密码有效期仅在一次会话或者交易过程中，因此不容易受到重放攻击。

OTP 一般分为计次使用和计时使用两种，计次使用的OTP产出后，可在不限时间内使用；

计时使用的 OTP 则可设置密码有效时间，从30秒到两分钟不等，而 OTP 在进行认证之后即废弃不用，下次认证必须使用新的密码，降低了不经授权访问限制资源可能性。

获取一次性密码的方法一般有以下几种：

1. 手机短信
2. 手机令牌
3. 硬件令牌

# 2. 模版模式例子

OTP 有 SMS OTP 和 EMAIL OTP，但无论是短信 OTP 还是 EMAIL OTP，OTP 过程的整个步骤都是相同的。

1. 生成随机 n 位数
2. 将此数字保存在缓存中以便以后验证。
3. 准备好内容
4. 发送通知
5. 发布指标

#  3. 模版模式和回调函数的区别

模板方法和回调应用场景是一致的，都是定义好算法骨架，并对外开放扩展点，符合开闭原则；两者的却别是代码的实现上不同，模板方法是通过继承来实现，是自己调用自己；回调是类之间的组合。

