享元模式

对于棋牌类的游戏，例如象棋，无论是什么对局，棋子的基本属性（棋子1的名字：「炮」，棋子1的颜色：「Red」，棋子1的材质：「木质」......）其实是固定的，并不会因为随着下棋的过程变化。

那我们就可以把棋子不变的这部分设置为享元，让所有的对局都共享、复用这些对象，以此达到节省内存的目的。

不过每个棋局棋子的位置不能共享，所以这部分需要棋盘记录下来。




1. 享元模式和单例的区别

在单例模式中，一个类只能创建一个对象，而在享元模式中，一个类可以创建多个对象，每个对象被多处代码引用共享。

尽管从代码实现上来看，享元模式和多例有很多相似之处，但从设计意图上来看，它们是完全不同的。应用享元模式是为了对象复用，节省内存，而应用多例模式是为了限制对象的个数。

2. 享元模式和缓存的区别

在享元模式的实现中，通过工厂类来“缓存”已经创建好的对象。这里的“缓存”是“存储”的意思，跟平时所说的“数据库缓存”“CPU 缓存”“MemCache 缓存”是两回事。

平时所讲的缓存，主要是为了提高访问效率，而非复用。

3. 享元模式和对象池的区别

池化技术中的“复用”可以理解为“重复使用”，主要目的是节省时间（比如从数据库池中取一个连接，不需要重新创建）。在任意时刻，每一个对象、连接、线程，并不会被多处使用，而是被一个使用者独占，当使用完成之后，放回到池中，再由其他使用者重复利用。享元模式中的“复用”可以理解为“共享使用”，在整个生命周期中，都是被所有使用者共享的，主要目的是节省空间。




